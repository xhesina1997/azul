{
  "version": 3,
  "file": "ngx-filepond.umd.js",
  "sources": [
    "ng://ngx-filepond/out/filepond.module.ts",
    "ng://ngx-filepond/out/filepond.component.ts"
  ],
  "sourcesContent": [
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FilePondComponent } from './filepond.component';\n\nexport { registerPlugin } from 'filepond';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [FilePondComponent],\n  exports: [\n    FilePondComponent\n  ]\n})\nexport class FilePondModule { }",
    "import { \n  Component,\n  ElementRef,\n  SimpleChanges,\n  ViewEncapsulation,\n  EventEmitter,\n  NgZone,\n  Output, \n  Input\n} from '@angular/core';\n\nimport {\n  create,\n  supported\n} from 'filepond';\n\n// We test if filepond is supported on the current client\nconst isSupported: Boolean = supported();\n\n// List of attributes for fallback input\nconst inputAttributes: Array<string> = [\n  'id', \n  'name',\n  'class', \n  'multiple', \n  'required', \n  'disabled',\n  'capture',\n  'accept'\n];\n\n// Methods not made available on the component\nconst filteredComponentMethods: Array<string> = [\n  'setOptions',\n  'on',\n  'off',\n  'onOnce',\n  'appendTo',\n  'insertAfter',\n  'insertBefore',\n  'isAttachedTo',\n  'replaceElement',\n  'restoreElement',\n  'destroy'\n];\n\nconst outputs: Array<string> = [\n  'oninit', \n  'onwarning', \n  'onerror', \n  'onactivatefile',\n  'onaddfilestart', \n  'onaddfileprogress', \n  'onaddfile', \n  'onprocessfilestart', \n  'onprocessfileprogress', \n  'onprocessfileabort', \n  'onprocessfilerevert', \n  'onprocessfile',\n  'onprocessfiles',\n  'onremovefile',\n  'onpreparefile',\n  'onupdatefiles'\n];\n\n// Component outline\n@Component({\n  selector: 'file-pond',\n  encapsulation: ViewEncapsulation.None,\n  template: `<div class=\"filepond--wrapper\">\n  <input type=\"file\"/>\n</div>`,\n  styles: [``],\n  outputs\n})\n\nexport class FilePondComponent {\n\n  @Input()\n  options: Object = {};\n\n  @Input()\n  files: Array<any>;\n\n  private root: ElementRef;\n  private zone: NgZone;\n  private pond: any;\n  private handleEvent: Function = null;\n\n  constructor(root: ElementRef, zone: NgZone) {\n    this.root = root;\n    this.zone = zone;\n\n    outputs.forEach(output => {\n      this[output] = new EventEmitter<any>();\n    });\n  }\n\n  ngAfterViewInit() {\n\n    const input = this.root.nativeElement.querySelector('input');\n\n    // transfer relevant attributes to input, this so we still have an input with the correct attributes should file pond not load\n    const attributes = this.root.nativeElement.attributes;\n    inputAttributes.forEach(name => {\n      const value = attributes[name] ? attributes[name].value : this.options[name];\n      if (!value) {\n        return;\n      }\n      input.setAttribute(name, value);\n    });\n\n    // no sufficient features supported in this browser\n    if (!isSupported) {\n      return;\n    }\n\n    // map FilePond events to Angular $emitters\n    this.handleEvent = (e) => {\n      this[`on${e.type.split(':')[1]}`].emit({...e.detail});\n    };\n    outputs.forEach(event => {\n      this.root.nativeElement.addEventListener(`FilePond:${ event.substr(2) }`, this.handleEvent);\n    });\n  \n    // will block angular from listening to events inside the pond\n    this.zone.runOutsideAngular(() => {\n      \n      // create instance\n      this.pond = create(input, {\n          // our options\n          ...this.options, \n\n          // our initial files\n          files: this.files\n        }\n      );\n\n    });\n\n    // Copy instance method references to component instance\n    Object.keys(this.pond)\n      \n      // remove unwanted methods\n      .filter(key => filteredComponentMethods.indexOf(key) === -1)\n      \n      // set method references from the component instance to the pond instance\n      .forEach(key => {\n        this[key] = this.pond[key];\n      });\n\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n\n    // no need to handle first change\n    if (changes.firstChange) {\n      return;\n    };\n\n    // no filepond instance available\n    if (!this.pond) {\n      return;\n    }\n\n    // use new options object as base ( or if not available, use current options )\n    const options = changes.options ? changes.options.currentValue : this.options;\n\n    // see if file list has changed\n    if (changes.files && JSON.stringify(changes.files.previousValue) !== JSON.stringify(changes.files.currentValue)) {\n     \n      // file list has changed\n      options.files = changes.files.currentValue;\n    }\n    \n    // set new options\n    this.pond.setOptions(options);\n  }\n\n  ngOnDestroy() {\n    if (!this.pond) {\n        return;\n    }\n\n    outputs.forEach(event => {\n      this.root.nativeElement.removeEventListener(`FilePond:${ event.substr(2) }`, this.handleEvent);\n    });\n\n    this.pond.destroy();\n  }\n\n}\n"
  ],
  "names": [
    "CommonModule",
    "NgModule",
    "Input",
    "NgZone",
    "ElementRef",
    "ViewEncapsulation",
    "Component",
    "create",
    "EventEmitter",
    "supported"
  ],
  "mappings": "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"
}
